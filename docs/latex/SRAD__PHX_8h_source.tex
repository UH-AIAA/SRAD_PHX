\doxysection{SRAD\+\_\+\+PHX.\+h}
\hypertarget{SRAD__PHX_8h_source}{}\label{SRAD__PHX_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ SRAD\_PHX\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ SRAD\_PHX\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <Arduino.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <SD.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <Adafruit\_Sensor.h>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Adafruit\_GPS.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Adafruit\_ADXL375.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Adafruit\_BNO055.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <Adafruit\_BMP3XX.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Adafruit\_LSM6DSO32.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <Quaternion.h>}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structFlightData}{FlightData}}\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{comment}{//\ data\ collected\ by\ sensors}}
\DoxyCodeLine{00017\ \ \ \ \ Vector3\ lsm\_gyro,\ lsm\_acc;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Gyroscope/Accelerometer\ \ (LSM6DS032\ Chip)}}
\DoxyCodeLine{00018\ \ \ \ \ Vector3\ adxl\_acc;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Acceleromter\ (AXDL375\ Chip)}}
\DoxyCodeLine{00019\ \ \ \ \ Vector3\ bno\_gyro,\ bno\_acc,\ bno\_mag;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Gyro/Accel/Magnetic\ Flux\ (BNO055\ Chip)}}
\DoxyCodeLine{00020\ \ \ \ \ Quaternion\ bno\_orientation;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Orientation\ (also\ BNO055)}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{float}\ lsm\_temp,\ adxl\_temp,\ bno\_temp;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Temperature\ (all\ chips\ that\ record)}}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{float}\ bmp\_temp,\ bmp\_press,\ bmp\_alt;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Barometer\ Pressure/Altitude\ (BMP388\ Chip)}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ data\ processing\ variables}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{float}\ off\_alt,\ prev\_alt,\ v\_vel;}
\DoxyCodeLine{00026\ \ \ \ \ Vector3\ angular\_offset;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ GPS\ has\ some\ orientation\ bias\ -\/-\/\ this\ corrects\ when\ calibrated.}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{bool}\ offset\_calibrated;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ flag\ to\ tell\ us\ if\ we've\ configured\ this}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ uint64\_t\ totalTime\_ms;}
\DoxyCodeLine{00030\ \};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{enum}\ STATES\ \{}
\DoxyCodeLine{00033\ \ \ \ \ PRE\_NO\_CAL\ =\ 0,}
\DoxyCodeLine{00034\ \ \ \ \ PRE\_CAL\ =\ 1,}
\DoxyCodeLine{00035\ \ \ \ \ FLIGHT\_ASCENT\ =\ 2,}
\DoxyCodeLine{00036\ \ \ \ \ FLIGHT\_DESCENT\ =\ 3,}
\DoxyCodeLine{00037\ \ \ \ \ POST\_LANDED\ =\ 4,}
\DoxyCodeLine{00038\ \};}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }FLIGHT\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ initial\ constructor}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ FLIGHT(\textcolor{keywordtype}{int}\ a1,\ \textcolor{keywordtype}{int}\ a2,\ \textcolor{keywordtype}{int}\ l1,\ \textcolor{keywordtype}{int}\ l2,\ String\ h,\ Adafruit\_GPS\&\ g,\ \mbox{\hyperlink{structFlightData}{FlightData}}\&\ o)\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ :\ accel\_liftoff\_threshold(a1),\ accel\_liftoff\_time\_threshold(a2),\ }
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ land\_time\_threshold(l1),\ land\_altitude\_threshold(l2),\ data\_header(h),\ last\_gps(g),\ output(o)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ STATE\ =\ STATES::PRE\_NO\_CAL;}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ runningTime\_ms\ =\ 0;}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ constructor\ to\ automatically\ cast\ integer\ outputs\ from\ helpfer\ functions}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FLIGHT(int\ stateVal)\ :\ \ STATE(static\_cast<STATES>(stateVal))\ \{\}}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ high\ level\ functions}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classFLIGHT_a100decede83c1b0280bee2df0245abc7}{calculateState}}();}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_a547305c964e411d02d87edd70e3bb0f3}{read\_LSM}}(Adafruit\_LSM6DSO32\ \&);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_af17bfc392eef12a7d27e33953b99bec4}{read\_BMP}}(Adafruit\_BMP3XX\ \&);}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_a85c41e226ce958b8eb0b5ecf7acdd3a7}{read\_ADXL}}(Adafruit\_ADXL375\ \&);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_a5f8e2bef2eb7540b19f91e1f5f99516e}{read\_BNO}}(Adafruit\_BNO055\ \&);}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_a020559dcb9d7c866bf7355712a5a6645}{read\_GPS}}(Adafruit\_GPS\ \&);}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ incrementTime();}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ writeSD(\textcolor{keywordtype}{bool},\ File\ \&);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ writeSERIAL(\textcolor{keywordtype}{bool},\ Stream\ \&);\ \ \textcolor{comment}{//\ Strema\ allows\ Teensy\ USB\ as\ well}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ helper\ functions}}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_a07f5f0ac395431e4b08a46352f23d376}{isCal}}();}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classFLIGHT_afe01869077d9e99c0a1830234701caae}{isAscent}}();}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isDescent();}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isLanded();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ calibrate();}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ accel\_liftoff\_threshold;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ METERS\ PER\ SECOND\string^2}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ accel\_liftoff\_time\_threshold;\ \ \ \textcolor{comment}{//\ MILLISECONDS}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ land\_time\_threshold;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ MILLISECONDS}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ land\_altitude\_threshold;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ METERS}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structFlightData}{FlightData}}\&\ output;}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ String\ data\_header;}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ Adafruit\_GPS\&\ last\_gps;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ used\ for\ data\ collection,\ for\ some\ reason\ the\ GPS\ stores\ it}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ uint16\_t\ deltaTime\_ms;}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ uint64\_t\ runningTime\_ms;}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ calibrated\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ STATES\ STATE;}
\DoxyCodeLine{00084\ \};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
